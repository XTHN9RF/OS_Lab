# Лабораторна робота №6. Використання GitHub Actions.

## План:
    1. Ознайомитись із поняттями CI/CD та GitHub Actions.
    2. Задеплоїти проект на EC2 або VPS(за наявності) за допомогою GitHub Actions.
    3. Ознайомитись із github pipelines та використати їх для реалізації CI/CD.

---
Виконав студент ІІІ курсу

Напрям ІПЗ, група 1.2

Дуран Владислав Юрійович

---

### 1. Ознайомитись із поняттями CI/CD та GitHub Actions

**Безперервна інтеграція (CI/CD)** — це практика програмного забезпечення, яка вимагає частого **committing code** в спільному репозиторії. Частіша **committing code** швидше виявляє помилки та зменшує обсяг коду, який розробнику потрібно налагодити під час пошуку джерела помилки. Часті оновлення коду також спрощують об’єднання змін від різних членів команди розробників програмного забезпечення. Це чудово для розробників, які можуть витрачати більше часу на написання коду та менше часу на налагодження помилок або вирішення конфліктів злиття.

Коли ви фіксуєте код у своєму репозиторії, ви можете постійно створювати та тестувати код, щоб переконатися, що **committing** не створює помилок. Ваші тести можуть включати лінтери коду (які перевіряють форматування стилю), перевірки безпеки, покриття коду, функціональні тести та інші спеціальні перевірки.
Для створення та тестування коду потрібен сервер. Ви можете створювати та тестувати оновлення локально, перш ніж надсилати код у сховище, або ви можете використовувати сервер CI, який перевіряє наявність нових комітів коду в сховищі.
CI за допомогою GitHub Actions пропонує робочі процеси, які можуть створювати код у вашому сховищі та запускати ваші тести. Робочі цикли можна запускати на віртуальних машинах, розміщених на GitHub, або на машинах, які ви самі хостите.

Ви можете налаштувати свій робочий процес CI на запуск, коли відбувається подія GitHub (наприклад, коли новий код надсилається у ваше сховище), за встановленим розкладом або коли відбувається зовнішня подія за допомогою веб-хуку відправки сховища.
GitHub запускає ваші тести CI та надає результати кожного тесту в запиті на отримання, щоб ви могли побачити, чи зміна у вашій гілці викликає помилку. Коли всі тести CI в робочому процесі пройдено, внесені вами зміни готові до перегляду членом команди або об’єднання. Якщо тест фейлиться, то ви можете легко перреглянути та вирішити помилку.Коли ви налаштовуєте CI у своєму репозиторії, GitHub аналізує код у вашому сховищі та рекомендує робочі процеси CI на основі мови та фреймворку у вашому сховищі. Наприклад, якщо ви використовуєте Node.js, GitHub запропонує початковий робочий процес, який інсталює ваші пакети Node.js і запускає ваші тести. Ви можете скористатися початковим робочим процесом CI, запропонованим GitHub, налаштувати запропонований початковий робочий процес або створити власний власний файл робочого процесу для запуску тестів CI.Окрім допомоги в налаштуванні робочих процесів CI для вашого проекту, ви можете використовувати GitHub Actions для створення робочих процесів протягом усього життєвого циклу розробки програмного забезпечення. Наприклад, ви можете використовувати дії для розгортання, упаковки або випуску свого проекту.

**GitHub Actions** — це платформа безперервної інтеграції та безперервної доставки (CI/CD), яка дозволяє вам автоматизувати збірку, тестування та розгортання. Ви можете створювати робочі процеси, які створюють і тестують кожен запит на отримання до вашого сховища, або розгортати об’єднані запити на отримання в робочому середовищі.

GitHub Actions виходить за рамки просто DevOps і дозволяє запускати робочі процеси, коли у вашому сховищі відбуваються інші події. Наприклад, ви можете запустити робочий процес, щоб автоматично додавати відповідні мітки щоразу, коли хтось створює нову проблему у вашому сховищі.

### 2. Задеплоїти проект на EC2 або VPS(за наявності) за допомогою GitHub Actions.

Я вирішив деплоїти просту html сторінку, тому спочатку створив її

Далі я створив інстанс на AWS та підключився до нього через SSH
Після чого перейшов у **Settings -> Actions -> Runners -> Active runners**

Створення ранера у графічному інтерфейсі, **кнопка New hosted runner**

![image1](assets/runners.png)

Я створив ранер на ОС Linux

![image2](assets/runners_architect.png)

Після вибору архітектури можна підключатися до інстансу та виконувати інструкції з GitHub

![image3](assets/download_instruction.png)
<br/>

![image4](assets/download_commands_done.png)

Виконуємо першу команду з вкладки **Configure**

![image5](assets/config_commands.png)
<br/>

![image6](assets/config_done.png)

Там робимо налаштування ранера, я залишив дефолтні

Після цих операцій оновлюємо сторінку браузера та бачимо створений і активний ранер

![image7](assets/runners_ip.png)

Далі нам потрібно встановити nginx на свій інстанс, дати дозвіл х+ усім папкам в шляху до нашого файлу і прописати конфіг сервера щоб запустити сторінку

![image8](assets/folders_path.png)

Ось результат

![image9](assets/done_page.png)

### 3. Ознайомитись із github pipelines та використати їх для реалізації CI/CD.

Щоб вибрати потрібний pipeline я зайшов у своєму репозиторії у вкладку **Actions**, де GitHub сам пропонує потрібний pipeline

Я обрав дефолтний пайплайн та відредагував його для роботи з ранером

```
# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "labwork_six" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: self-hosted

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v3

      # Runs a single command using the runners shell
      - name: Run a one-line script
        run: echo Hello, world!

      # Runs a set of commands using the runners shell
      - name: Run a multi-line script
        run: |
          echo Add other actions to build,
```

Після редагування yaml файлу я вибираю гілку, в яку будуть закомічені зміни і тисну **Start commit**

![image10](assets/start_commit.png)

Тут я ввів назву гілки,у яку буде запушений коміт (пізніше я ренеймив гілку на **labwork_six**)

Перевірив чи коректно все працює (запушив стилі до html сторінки)

Ось результат, стилі додались

![image11](assets/check_push.png)